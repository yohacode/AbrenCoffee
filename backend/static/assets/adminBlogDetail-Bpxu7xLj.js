import{u as f,r as o,a as x,j as e,y as s,i as c}from"./index-D2_lBN_m.js";const b=()=>{const{id:n}=f(),[r,d]=o.useState(null),[g,a]=o.useState(!0),i=x();o.useEffect(()=>{(async()=>{try{a(!0);const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}const l=await c.get(`/blog/detail/${n}`,{headers:{Authorization:`Bearer ${t}`}});if(l.status!==200)throw new Error("Blog not found");d(l.data.blog)}catch(t){t instanceof Error?s.error("Fetch failed: "+t.message):s.error("Fetch failed: An unknown error occurred")}finally{a(!1)}})()},[n]);const u=()=>{i(`/adminpage/blog/update/${n}`)},h=async()=>{if(window.confirm("Are you sure you want to delete this blog?"))try{const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}await c.delete(`/blogs/delete/${n}`,{headers:{Authorization:`Bearer ${t}`}}),s.success("Blog deleted successfully"),i("/blogs")}catch(t){t instanceof Error?s.error("Delete failed: "+t.message):s.error("Delete failed: An unknown error occurred")}};return g?e.jsx("div",{children:"Loading blog details..."}):r?e.jsxs("div",{className:"admin-blog-detail",children:[e.jsxs("h2",{children:[e.jsx("strong",{children:"Title:"})," ",r.title]}),e.jsxs("div",{className:"blog-detail-card",children:[e.jsx("img",{src:r.image,alt:""}),e.jsxs("div",{className:"blog-detail-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Author:"})," ",r.author_username]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",r.category_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"})," ",new Date(r.created_at).toLocaleString()]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Content:"})," ",r.content]})]})]}),e.jsxs("div",{className:"button-group mt-4",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:u,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:h,children:"Delete"})]})]}):e.jsx("div",{children:"No blog data available"})};export{b as default};
