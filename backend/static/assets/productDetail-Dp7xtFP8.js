import{u as x,r as o,a as f,j as e,y as s,i as d}from"./index-CpushPBl.js";const m=()=>{const{id:n}=x(),[r,l]=o.useState(null),[u,a]=o.useState(!0),i=f();o.useEffect(()=>{(async()=>{try{a(!0);const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}const c=await d.get(`/products/detail/${n}`,{headers:{Authorization:`Bearer ${t}`}});if(c.status!==200)throw new Error("Product not found");l(c.data),console.log("Product fetched:",c.data)}catch(t){t instanceof Error?s.error("Fetch failed: "+t.message):s.error("Fetch failed: An unknown error occurred")}finally{a(!1)}})()},[n]);const h=()=>{i(`/adminPage/products/update/${n}`)},g=async()=>{if(window.confirm("Are you sure you want to delete this product?"))try{const t=localStorage.getItem("access_token");if(!t){s.error("Authentication token missing");return}await d.delete(`/products/delete/${n}`,{headers:{Authorization:`Bearer ${t}`}}),s.success("Product deleted successfully"),i("/products")}catch(t){t instanceof Error?s.error("Delete failed: "+t.message):s.error("Delete failed: An unknown error occurred")}};return u?e.jsx("div",{children:"Loading product details..."}):r?e.jsxs("div",{className:"product-detail",children:[e.jsx("h2",{children:"Product Detail"}),e.jsxs("div",{className:"product-detail-card",children:[e.jsx("img",{src:r.image,alt:""}),e.jsxs("div",{className:"product-detail-info",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",r.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",r.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Category:"})," ",r.category]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price:"})," $",r.price]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Stock:"})," ",r.stock]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Is Subscription:"})," ",r.is_subscription?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Quantity:"})," ",r.quantity,"g"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Created At:"})," ",new Date(r.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"button-group mt-4",children:[e.jsx("button",{className:"btn btn-primary mr-2",onClick:h,children:"Edit"}),e.jsx("button",{className:"btn btn-danger",onClick:g,children:"Delete"})]})]}):e.jsx("div",{children:"No product data available"})};export{m as default};
