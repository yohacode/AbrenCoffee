import{u as j,r as o,j as e,i as p,y as x}from"./index-Bccf4OWe.js";const U=()=>{const{id:h}=j(),t=Number(h),[r,d]=o.useState({name:"",email:"",role:""}),[i,u]=o.useState(!1),[m,b]=o.useState("");o.useEffect(()=>{t&&(async()=>{try{const a=localStorage.getItem("access_token"),s=await p.get(`/users/${t}/`,{headers:{Authorization:`Bearer ${a}`}}),{name:c,email:f,role:y}=s.data;d({name:c,email:f,role:y})}catch{x.error("❌ Failed to load user data")}})()},[t]);const g=async l=>{l.preventDefault(),u(!0);try{const a=localStorage.getItem("access_token"),s=await p.put(`/users/update/${t}/`,r,{headers:{Authorization:`Bearer ${a}`}});b("✅ User updated successfully!"),console.log(s.data)}catch{x.error("❌ Error updating user")}finally{u(!1)}},n=l=>{const{name:a,value:s}=l.target;d(c=>({...c,[a]:s}))};return e.jsxs("div",{className:"p-6 max-w-xl mx-auto bg-white rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Update User"}),m&&e.jsx("div",{className:"mb-4 text-green-600 bg-green-100 p-2 rounded",children:m}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-gray-700",children:"Name"}),e.jsx("input",{type:"text",name:"name",className:"w-full border border-gray-300 rounded px-3 py-2",value:r.name,onChange:n,title:"User name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-gray-700",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"w-full border border-gray-300 rounded px-3 py-2",value:r.email,onChange:n,title:"User email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 text-gray-700",children:"Role"}),e.jsxs("select",{name:"role",className:"w-full border border-gray-300 rounded px-3 py-2",value:r.role,onChange:n,title:"User role",required:!0,children:[e.jsx("option",{value:"",children:"Select a role"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"staff",children:"Staff"}),e.jsx("option",{value:"customer",children:"Customer"})]})]}),e.jsx("button",{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50",disabled:i,children:i?"Updating...":"Update User"})]})]})};export{U as default};
