import{r as c,u as f,j as e,i as v,L as C,o as N,p as w,q as k,s as g}from"./index-CYbfX4g-.js";import{c as S}from"./index-BJQuPtR-.js";const q=[{href:"https://www.facebook.com/abren",icon:e.jsx(N,{"aria-label":"Facebook"})},{href:"https://www.instagram.com/abren",icon:e.jsx(S,{"aria-label":"Instagram"})},{href:"https://www.tiktok.com/@abren",icon:e.jsx(w,{"aria-label":"TikTok"})},{href:"https://www.twitch.tv/abren",icon:e.jsx(k,{"aria-label":"Twitch"})},{href:"https://x.com/abren",icon:e.jsx(g,{"aria-label":"X (formerly Twitter)"})}],F=[{number:1,title:"Choose Your Favorite Coffee"},{number:2,title:"Determine order interval"},{number:3,title:"Add to cart and All done"}],P=[{title:"Weekly Plan",description:"Fresh coffee delivered every week. Perfect for busy professionals and daily brewers.",price:"$15/week"},{title:"Monthly Plan",description:"A curated selection of beans delivered once a month. Ideal for occasional coffee lovers.",price:"$45/month"},{title:"Office Plan",description:"Keep the team fueled with bulk deliveries for your workspace or business.",price:"Custom Quote"}],I=()=>e.jsx("div",{className:"subscripton-payment",children:q.map(({href:s,icon:n},r)=>e.jsx(C,{to:s,className:"social",target:"_blank",rel:"noopener noreferrer",children:n},r))}),A=({title:s,description:n,price:r})=>e.jsxs("div",{className:"plan-card",children:[e.jsx("h2",{children:s}),e.jsx("p",{children:n}),e.jsx("span",{className:"price",children:r})]}),T=({number:s,title:n})=>e.jsxs("div",{className:"guid-card",children:[e.jsx("span",{children:s}),e.jsx("p",{children:n})]}),E=({product:s,frequency:n,onFrequencyChange:r,onAddToCart:h,onRemove:d,onUpdateQuantity:u,isLoading:m})=>{const o=s.stock===0,l=s.quantity??1;return e.jsxs("article",{className:"item-card",children:[e.jsx("img",{src:s.image,alt:s.name,className:"product-image"}),e.jsx("h3",{className:"product-name",children:s.name}),e.jsx("div",{className:"product-details",children:e.jsxs("p",{className:"price",children:["$",s.price.toFixed(2)]})}),e.jsx("button",{className:"addCart",onClick:()=>h({...s,delivery_frequency:n}),disabled:m||o,type:"button",children:m?"Adding...":o?"Out of Stock":"Add to Cart"}),e.jsxs("div",{className:"cart-item-controls",children:[e.jsx("button",{"aria-label":"Decrease quantity",onClick:()=>u(s.id,l-1),disabled:l<=1,type:"button",children:"âž–"}),e.jsx("button",{"aria-label":"Increase quantity",onClick:()=>u(s.id,l+1),type:"button",children:"âž•"}),e.jsx("button",{"aria-label":"Remove item",onClick:()=>d(s.id),type:"button",children:"ðŸ—‘ï¸"}),e.jsxs("select",{"aria-label":"Select delivery frequency",value:n,onChange:p=>r(s.id,p.target.value),className:"frequency-select",children:[e.jsx("option",{value:"none",children:"One-time"}),e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"monthly",children:"Monthly"})]})]})]},s.id)},M=()=>{const[s,n]=c.useState({}),[r,h]=c.useState([]),[d,u]=c.useState(null),[m,o]=c.useState(new Set),{removeItem:l,updateItemQuantity:p,cartItemCount:x,addItem:b}=f();c.useEffect(()=>{async function a(){try{const t=await v.get("/products/list/");h(t.data.map(i=>({...i,price:Number(i.price),quantity:Number(i.quantity),delivery_frequency:"none"})))}catch{u("Failed to load products. Please try again later.")}}a()},[]);const j=c.useCallback((a,t)=>{n(i=>({...i,[a]:t}))},[]),y=c.useCallback(a=>{o(t=>new Set(t).add(a.id)),b(a),setTimeout(()=>{o(t=>{const i=new Set(t);return i.delete(a.id),i})},500)},[b]);return e.jsx("div",{className:"subscription",children:e.jsxs("div",{className:"subscription-container",children:[e.jsxs("section",{className:"subscription-hero",children:[e.jsx("h1",{className:"subscription-title",children:"Subscribe to Fresh Coffee"}),e.jsx("p",{className:"subscription-intro",children:"Enjoy our premium coffee delivered straight to your door every week or month. Choose a plan that suits your taste and schedule."}),e.jsx("p",{children:"Enjoy 10% discount on Subscription"}),e.jsx(I,{})]}),e.jsx("section",{className:"subscription-plans",children:P.map(({title:a,description:t,price:i})=>e.jsx(A,{title:a,description:t,price:i},a))}),e.jsx("section",{className:"subscription-guide",children:F.map(({number:a,title:t})=>e.jsx(T,{number:a,title:t},a))}),e.jsx("section",{className:"subscription-items",children:r.map(a=>e.jsx(E,{product:a,frequency:s[a.id]||"none",onFrequencyChange:j,onAddToCart:y,onRemove:l,onUpdateQuantity:p,isLoading:m.has(a.id),cartItemCount:x},a.id))}),d&&e.jsx("p",{className:"error-message",children:d})]})})};export{M as default};
