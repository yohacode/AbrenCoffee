import{r,j as e,z as N,i as m,y as g}from"./index-CqnK1jY6.js";import{C as S}from"./confirmDelete-CqUGkXqh.js";const k=()=>{const[f,n]=r.useState(!1),[a,c]=r.useState([]),[i,C]=r.useState(""),[d,y]=r.useState(1),o=5;r.useEffect(()=>{(async()=>{const s=localStorage.getItem("access_token");try{const l=await m.get("/blog/list/",{headers:{Authorization:`Bearer ${s}`}});c(l.data)}catch(l){console.error("Failed to fetch blogs:",l)}})()},[]);const b=()=>n(!0),p=async t=>{n(!1);const s=localStorage.getItem("access_token");try{await m.delete(`/products/delete/${t}/`,{headers:{Authorization:`Bearer ${s}`}}),g.success("âœ… Invoice deleted successfully!"),c(a.filter(l=>l.id!==t))}catch{g.error("âŒ Failed to delete invoice.")}},h=a.filter(t=>t.title.toLowerCase().includes(i.toLowerCase())),x=d*o,u=x-o,j=h.slice(u,x),B=Math.ceil(h.length/o);return e.jsxs("div",{className:"blog-list",children:[e.jsx("h2",{children:"All Blogs"}),e.jsx("div",{style:{marginBottom:"1rem"},children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:i,onChange:t=>C(t.target.value),className:"form-input"})}),e.jsx("div",{className:"blog-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Title"}),e.jsx("th",{children:"Author"}),e.jsx("th",{children:"Categories"}),e.jsx("th",{children:"Created At"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.length>0?j.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:u+s+1}),e.jsx("td",{children:t.title}),e.jsx("td",{children:t.author_username||`User ${t.author}`}),e.jsx("td",{children:(t.categories_name||[]).join(", ")}),e.jsx("td",{children:new Date(t.created_at).toLocaleString()}),e.jsxs("td",{children:[e.jsx("button",{title:"edit",className:"btn-edit",onClick:()=>alert(`Navigate to edit blog ${t.id}`),children:e.jsx(N,{})}),e.jsx("button",{className:"btn-delete",onClick:b,children:"ðŸ—‘ï¸"})]}),e.jsx(S,{isOpen:f,title:"Delete blog",message:"Are you sure you want to delete this blog? This action cannot be undone.",onConfirm:()=>p(Number(t.id)),onCancel:()=>n(!1)})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center",children:"No blogs found."})})})]})}),e.jsx("div",{className:"pagination",children:[...Array(B).keys()].map(t=>e.jsx("button",{onClick:()=>y(t+1),className:d===t+1?"active":"",children:t+1},t+1))})]})};export{k as default};
