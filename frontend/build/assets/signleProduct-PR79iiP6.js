import{r as a,u as S,k as C,j as e,i as u}from"./index-DrOKnMkI.js";import{B as y}from"./backbutton-DRuE8yzK.js";const E="/build/assets/create%20an%20image%20with%20another%20coffee%20packaging%20materials-tg4m0EnJ.png",I=()=>{var l;const[r,h]=a.useState(null),{id:o}=S(),[t,m]=a.useState(null),[c,p]=a.useState(!0),[i,g]=a.useState(null),{addItem:f}=C(),d=(t==null?void 0:t.stock)===0;if(a.useEffect(()=>{(async()=>{try{const s=await u.get(`/products/detail/${o}/`);m(s.data)}catch(s){console.error("Error fetching product:",s),g("Failed to load product.")}finally{p(!1)}})()},[o]),a.useEffect(()=>{(async()=>{const s=localStorage.getItem("access_token"),k={headers:s?{Authorization:`Bearer ${s}`}:{},withCredentials:!0},P=await u.get("/cart/",k);h(P.data)})()},[]),c)return e.jsx("p",{children:"Loading..."});if(i)return e.jsx("p",{children:i});if(!t)return e.jsx("p",{children:"Product not found."});const x=t.image.startsWith("http")?t.image:E,j=((l=r==null?void 0:r.cart_items)==null?void 0:l.some(n=>n.product.id===(t==null?void 0:t.id)))??!1;return e.jsxs("div",{className:"single-product",children:[e.jsx("div",{className:"single-product-header",children:e.jsx("h2",{children:t.name})}),e.jsxs("div",{className:"product-grid",children:[e.jsx(y,{}),e.jsxs("article",{className:"product-card",children:[e.jsx("img",{src:x,alt:t.name}),e.jsxs("div",{className:"description",children:[e.jsx("p",{children:t.description}),e.jsxs("p",{children:["Price: $",Number(t.price).toFixed(2)]}),e.jsxs("p",{children:["Quantity: ",t.quantity,"g"]}),e.jsxs("p",{children:["Stock: ",t.stock]}),e.jsx("button",{className:"addCart",onClick:()=>f(t),disabled:c||d,type:"button",children:j?"InCart":c?"Adding...":d?"Out of Stock":"Add to Cart"})]})]})]})]})};export{I as default};
