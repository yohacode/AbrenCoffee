import{r as c,a as S,j as e,F as b,i as m,y as f}from"./index-DrOKnMkI.js";import{C as p}from"./confirmDelete-BRdewAfo.js";const E=()=>{const[g,a]=c.useState(!1),[l,o]=c.useState([]),[i,y]=c.useState(""),[d,C]=c.useState(1),r=5,P=S();c.useEffect(()=>{(async()=>{const s=localStorage.getItem("access_token"),n=await m.get("/products/list/",{headers:{Authorization:`Bearer ${s}`}});o(n.data),console.log(n.data)})()},[]);const k=()=>a(!0),N=async t=>{a(!1);const s=localStorage.getItem("access_token");try{await m.delete(`/products/delete/${t}/`,{headers:{Authorization:`Bearer ${s}`}}),f.success("✅ Invoice deleted successfully!"),o(l.filter(n=>n.id!==t.toString()))}catch{f.error("❌ Failed to delete invoice.")}},h=l.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())),x=d*r,u=x-r,j=h.slice(u,x),v=Math.ceil(h.length/r);return e.jsxs("div",{className:"product-list",children:[e.jsx("h2",{children:"All Products"}),e.jsx("div",{children:e.jsx("input",{type:"text",placeholder:"Search by title...",value:i,onChange:t=>y(t.target.value),className:"form-search"})}),e.jsx("div",{className:"product-table",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"#"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Price"}),e.jsx("th",{children:"Catagory"}),e.jsx("th",{children:"Stock"}),e.jsx("th",{children:"Quantity"}),e.jsx("th",{children:"Created at"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:j.length>0?j.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:u+s+1}),e.jsx("td",{children:t.name}),e.jsx("td",{children:t.price}),e.jsx("td",{children:t.category_name}),e.jsx("td",{className:t.stock.length<10?"less-stock":"",children:t.stock}),e.jsxs("td",{children:[t.quantity,"kg"]}),e.jsx("td",{children:t.created_at}),e.jsxs("td",{children:[e.jsx("button",{title:"view",className:"btn-edit",onClick:()=>P(`/adminPage/products/detail/${t.id}`),children:e.jsx(b,{})}),e.jsx("button",{className:"btn-delete",onClick:k,children:"🗑️"})]}),e.jsx(p,{isOpen:g,title:"Delete order",message:"Are you sure you want to delete this order? This action cannot be undone.",onConfirm:()=>N(Number(t.id)),onCancel:()=>a(!1)})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center",children:"No Product found."})})})]})}),e.jsx("div",{className:"pagination",children:[...Array(v).keys()].map(t=>e.jsx("button",{onClick:()=>C(t+1),className:d===t+1?"active":"",children:t+1},t+1))})]})};export{E as default};
